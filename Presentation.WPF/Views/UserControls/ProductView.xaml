<UserControl x:Class="Presentation.WPF.Views.ProductView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d">

    <Grid>
        <!-- MAIN GRID DEFINITION -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
            <RowDefinition Height="60"/>
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <Grid Margin="15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="200"/>
            </Grid.ColumnDefinitions>

            <ComboBox FontSize="18"
                      FontWeight="Bold"
                      Style="{StaticResource FlatComboBoxStyle}"
                      ItemsSource="{Binding Categories}"
                      SelectedItem="{Binding SelectedCategory}"
                      DisplayMemberPath="CategoryName"/>

            <Button Grid.Column="1"
                    Content="+ Add Product"
                    Style="{StaticResource FlatButtonStyle}"
                    Click="AddProduct_Click"/>
        </Grid>

        <!-- PRODUCT GRID -->
        <DataGrid Grid.Row="1"
                  Margin="15"
                  Style="{StaticResource FlatDataGridStyle}"
                  ItemsSource="{Binding Products}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True">
            <!-- Columns omitted for brevity; same as your original -->
        </DataGrid>

        <!-- PAGINATION -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="15">
            <Button Content="◀"
                    Style="{StaticResource FlatButtonStyle}"
                    Command="{Binding PrevPageCommand}"/>
            <TextBlock Text="{Binding PageDisplay}"
                       VerticalAlignment="Center"
                       Margin="10,0"/>
            <Button Content="▶"
                    Style="{StaticResource FlatButtonStyle}"
                    Command="{Binding NextPageCommand}"/>
        </StackPanel>

        <!-- OVERLAY (Shadow + Blur) -->
        <Border x:Name="Overlay"
                Grid.ColumnSpan="2" Grid.RowSpan="3"
                Background="#80000000"
                Visibility="Collapsed"
                MouseDown="Overlay_MouseDown">
            <Border.Effect>
                <BlurEffect Radius="5"/>
            </Border.Effect>
        </Border>

        <!-- SIDE DRAWER -->
        <Border x:Name="SideDrawer"
                Grid.Column="1"
                Width="250"
                Background="#FAFAFA"
                BorderBrush="#DDD"
                BorderThickness="1"
                ClipToBounds="True"
                IsHitTestVisible="{Binding IsDrawerOpen}">
            <Border.RenderTransform>
                <TranslateTransform x:Name="SideDrawerTransform" X="250"/>
            </Border.RenderTransform>

            <StackPanel Margin="20" x:Name="DrawerContent" Opacity="0">
                <!-- Drawer content -->
                <TextBlock Text="{Binding DrawerTitle}" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>
                <TextBlock Text="Product Name" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox Style="{StaticResource FlatTextBoxStyle}"
                         Text="{Binding EditableProduct.Name, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,15"/>
                <TextBlock Text="Category" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <ComboBox Style="{StaticResource FlatComboBoxStyle}"
                          ItemsSource="{Binding Categories}"
                          SelectedValue="{Binding EditableProduct.CategoryId}"
                          SelectedValuePath="CategoryId"
                          DisplayMemberPath="CategoryName" Margin="0,0,0,15"/>
                <TextBlock Text="Price" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox Style="{StaticResource FlatTextBoxStyle}" Text="{Binding EditableProduct.Price}" Margin="0,0,0,15"/>
                <TextBlock Text="Stock" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox Style="{StaticResource FlatTextBoxStyle}" Text="{Binding EditableProduct.Stock}" Margin="0,0,0,25"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Save" Width="100" Style="{StaticResource FlatButtonStyle}" Command="{Binding SaveCommand}"/>
                    <Button Content="Cancel" Width="100" Margin="10,0,0,0" Style="{StaticResource FlatButtonStyle}" Click="CancelDrawer_Click"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
